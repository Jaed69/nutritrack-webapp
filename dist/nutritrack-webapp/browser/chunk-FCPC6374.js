import{a as A}from"./chunk-5ZQY3ATP.js";import{a as q}from"./chunk-MUQBBXYO.js";import{b as M,c,d as y,e as N,g as w,h as D,i as I,j as F,k as G,p as k,q as R,s as V}from"./chunk-YUBUCD23.js";import"./chunk-6LZ2YNEV.js";import{A as a,Aa as j,B as x,K as p,L as u,P as f,Q as i,R as t,S as d,W as h,Y as P,_ as g,ca as n,ea as S,o as v,p as C,ra as E,u as s,xa as O,y as l,za as _}from"./chunk-S3CJXT6Z.js";import"./chunk-2VMXMS7J.js";function T(o,r){o&1&&(i(0,"div",3),n(1,"Cargando plan..."),t())}function B(o,r){if(o&1){let e=h();i(0,"form",5),P("ngSubmit",function(){v(e);let b=g();return C(b.guardar())}),i(1,"div",6)(2,"label"),n(3,"Nombre "),i(4,"span",7),n(5,"*"),t()(),d(6,"input",8),t(),i(7,"div",6)(8,"label"),n(9,"Descripci\xF3n "),i(10,"span",7),n(11,"*"),t()(),d(12,"textarea",9),t(),i(13,"div",6)(14,"label"),n(15,"Duraci\xF3n (d\xEDas) "),i(16,"span",7),n(17,"*"),t()(),d(18,"input",10),t(),i(19,"div",11)(20,"h3"),n(21,"Objetivos"),t(),i(22,"div",12)(23,"div",6)(24,"label"),n(25,"Calor\xEDas"),t(),d(26,"input",13),t(),i(27,"div",6)(28,"label"),n(29,"Prote\xEDnas (g)"),t(),d(30,"input",14),t()()(),i(31,"div",15)(32,"button",16),n(33,"Cancelar"),t(),i(34,"button",17),n(35),t()()()}if(o&2){let e=g();f("formGroup",e.formulario),l(34),f("disabled",e.formulario.invalid||e.guardando()),l(),S(" ",e.guardando()?"Guardando...":"Guardar Cambios"," ")}}var z=class o{constructor(r,e,m,b,L){this.fb=r;this.route=e;this.router=m;this.planService=b;this.notificationService=L}formulario;cargando=s(!0);guardando=s(!1);planId;ngOnInit(){this.planId=Number(this.route.snapshot.paramMap.get("id")),this.cargarPlan()}cargarPlan(){this.planService.obtenerPlanPorId(this.planId).subscribe({next:r=>{if(r.success&&r.data){let e=r.data;this.formulario=this.fb.group({nombre:[e.nombre,c.required],descripcion:[e.descripcion,c.required],duracionDias:[e.duracionDias,c.required],objetivo:this.fb.group({tipoObjetivo:[e.objetivo.tipoObjetivo],caloriasObjetivo:[e.objetivo.caloriasObjetivo],proteinasObjetivo:[e.objetivo.proteinasObjetivo],carbohidratosObjetivo:[e.objetivo.carbohidratosObjetivo],grasasObjetivo:[e.objetivo.grasasObjetivo]})}),this.cargando.set(!1)}},error:()=>{this.notificationService.showError("Error al cargar plan"),this.router.navigate(["/admin/planes"])}})}guardar(){this.formulario.invalid||(this.guardando.set(!0),this.planService.actualizarPlan(this.planId,this.formulario.value).subscribe({next:r=>{r.success&&(this.notificationService.showSuccess("Plan actualizado"),this.router.navigate(["/admin/planes"]))},error:()=>{this.guardando.set(!1),this.notificationService.showError("Error al actualizar")}}))}static \u0275fac=function(e){return new(e||o)(a(R),a(O),a(_),a(A),a(q))};static \u0275cmp=x({type:o,selectors:[["app-editar-plan"]],decls:8,vars:2,consts:[[1,"editar-plan-container"],[1,"header"],["routerLink","/admin/planes",1,"btn-link"],[1,"loading"],[1,"form",3,"formGroup"],[1,"form",3,"ngSubmit","formGroup"],[1,"form-group"],[1,"required"],["type","text","formControlName","nombre"],["formControlName","descripcion","rows","4"],["type","number","formControlName","duracionDias","min","1"],["formGroupName","objetivo"],[1,"form-row"],["type","number","formControlName","caloriasObjetivo"],["type","number","formControlName","proteinasObjetivo"],[1,"form-actions"],["type","button","routerLink","/admin/planes",1,"btn-secondary"],["type","submit",1,"btn-primary",3,"disabled"]],template:function(e,m){e&1&&(i(0,"div",0)(1,"div",1)(2,"h1"),n(3,"Editar Plan"),t(),i(4,"button",2),n(5,"\u2190 Volver"),t()(),p(6,T,2,0,"div",3),p(7,B,36,3,"form",4),t()),e&2&&(l(6),u(m.cargando()?6:-1),l(),u(!m.cargando()&&m.formulario?7:-1))},dependencies:[E,j,V,w,M,D,y,N,k,I,G,F],styles:[".editar-plan-container[_ngcontent-%COMP%]{padding:2rem;max-width:900px;margin:0 auto}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:2rem}h1[_ngcontent-%COMP%]{font-size:2rem;color:#2d3748}.btn-link[_ngcontent-%COMP%]{background:none;border:none;color:#667eea;font-weight:600;cursor:pointer}.form[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:12px;box-shadow:0 2px 8px #0000001a}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1rem}label[_ngcontent-%COMP%]{display:block;font-weight:600;color:#4a5568;margin-bottom:.5rem}.required[_ngcontent-%COMP%]{color:#e53e3e}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid #e2e8f0;border-radius:8px}.form-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:flex-end;margin-top:2rem}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]{padding:.75rem 2rem;border:none;border-radius:8px;font-weight:600;cursor:pointer}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.btn-secondary[_ngcontent-%COMP%]{background:#edf2f7;color:#4a5568}.loading[_ngcontent-%COMP%]{text-align:center;padding:3rem}"]})};export{z as EditarPlanComponent};
