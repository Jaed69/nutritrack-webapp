import{a as J}from"./chunk-NMCC4XAY.js";import{a as B}from"./chunk-MUQBBXYO.js";import{b as y,c as m,d as w,e as A,g as F,h as G,i as k,k as V,l as T,m as z,n as L,p as $,q,s as U}from"./chunk-YUBUCD23.js";import"./chunk-6LZ2YNEV.js";import{A as _,Aa as I,B as O,K as d,L as l,N as b,O as S,P as j,Q as t,R as e,S as u,W as h,Y as M,_ as p,ca as n,da as v,ea as g,fa as R,o as C,p as x,ra as P,u as f,xa as N,y as a,za as D}from"./chunk-S3CJXT6Z.js";import"./chunk-2VMXMS7J.js";var Q=(r,o)=>o.dia,W=(r,o)=>o.id;function X(r,o){r&1&&(t(0,"div",3),n(1,"Cargando ejercicios..."),e())}function Y(r,o){r&1&&(t(0,"div",27)(1,"p"),n(2,"No hay ejercicios asignados. Comienza agregando ejercicios para cada d\xEDa."),e()())}function Z(r,o){if(r&1&&(t(0,"span"),n(1),e()),r&2){let i=p().$implicit;a(),g("",i.peso," kg")}}function ee(r,o){if(r&1&&(t(0,"span"),n(1),e()),r&2){let i=p().$implicit;a(),g("",i.duracionMinutos," min")}}function ie(r,o){if(r&1&&(t(0,"span"),n(1),e()),r&2){let i=p().$implicit;a(),g("Descanso: ",i.tiempoDescanso,"s")}}function te(r,o){if(r&1&&(t(0,"p",37),n(1),e()),r&2){let i=p().$implicit;a(),v(i.notas)}}function ne(r,o){if(r&1){let i=h();t(0,"div",32)(1,"div",33)(2,"span",34),n(3),e(),t(4,"div",35)(5,"strong"),n(6),e(),t(7,"div",36)(8,"span"),n(9),e(),d(10,Z,2,1,"span"),d(11,ee,2,1,"span"),d(12,ie,2,1,"span"),e(),d(13,te,2,1,"p",37),e()(),t(14,"button",38),M("click",function(){let c=C(i).$implicit,E=p(3);return x(E.eliminarEjercicio(c.id))}),n(15," Eliminar "),e()()}if(r&2){let i=o.$implicit;a(3),g("",i.orden,"."),a(3),v(i.nombreEjercicio),a(3),R("",i.series," series \xD7 ",i.repeticiones," reps"),a(),l(i.peso?10:-1),a(),l(i.duracionMinutos?11:-1),a(),l(i.tiempoDescanso?12:-1),a(),l(i.notas?13:-1)}}function oe(r,o){if(r&1&&(t(0,"div",28)(1,"div",29)(2,"h3"),n(3),e(),t(4,"span",30),n(5),e()(),t(6,"div",31),b(7,ne,16,8,"div",32,W),e()()),r&2){let i=o.$implicit;a(3),v(i.dia),a(2),g("",i.ejercicios.length," ejercicio(s)"),a(2),S(i.ejercicios)}}function re(r,o){if(r&1){let i=h();t(0,"div",4)(1,"div",5)(2,"h2"),n(3,"Agregar Ejercicio a la Rutina"),e(),t(4,"form",6),M("ngSubmit",function(){C(i);let c=p();return x(c.agregarEjercicio())}),t(5,"div",7)(6,"div",8)(7,"label"),n(8,"ID Ejercicio "),t(9,"span",9),n(10,"*"),e()(),u(11,"input",10),e(),t(12,"div",8)(13,"label"),n(14,"D\xEDa "),t(15,"span",9),n(16,"*"),e()(),t(17,"select",11)(18,"option",12),n(19,"Lunes"),e(),t(20,"option",13),n(21,"Martes"),e(),t(22,"option",14),n(23,"Mi\xE9rcoles"),e(),t(24,"option",15),n(25,"Jueves"),e(),t(26,"option",16),n(27,"Viernes"),e(),t(28,"option",17),n(29,"S\xE1bado"),e(),t(30,"option",18),n(31,"Domingo"),e()()(),t(32,"div",8)(33,"label"),n(34,"Series "),t(35,"span",9),n(36,"*"),e()(),u(37,"input",19),t(38,"small"),n(39,"Debe ser positivo (RN13)"),e()(),t(40,"div",8)(41,"label"),n(42,"Repeticiones "),t(43,"span",9),n(44,"*"),e()(),u(45,"input",20),t(46,"small"),n(47,"Debe ser positivo (RN13)"),e()(),t(48,"div",8)(49,"label"),n(50,"Peso (kg)"),e(),u(51,"input",21),e(),t(52,"div",8)(53,"label"),n(54,"Duraci\xF3n (min)"),e(),u(55,"input",22),e(),t(56,"div",8)(57,"label"),n(58,"Descanso (seg)"),e(),u(59,"input",23),e(),t(60,"div",8)(61,"label"),n(62,"Orden"),e(),u(63,"input",24),e()(),t(64,"button",25),n(65),e()()(),t(66,"div",26)(67,"h2"),n(68,"Ejercicios por D\xEDa"),e(),d(69,Y,3,0,"div",27),b(70,oe,9,2,"div",28,Q),e()()}if(r&2){let i=p();a(4),j("formGroup",i.formulario),a(60),j("disabled",i.formulario.invalid||i.guardando()),a(),g(" ",i.guardando()?"Agregando...":"+ Agregar Ejercicio"," "),a(4),l(i.ejerciciosAgrupados().length===0?69:-1),a(),S(i.ejerciciosAgrupados())}}var H=class r{constructor(o,i,s,c,E){this.fb=o;this.route=i;this.router=s;this.rutinaService=c;this.notificationService=E;this.inicializarFormulario()}formulario;rutinaId;nombreRutina=f("");cargando=f(!0);guardando=f(!1);ejercicios=f([]);ejerciciosAgrupados=f([]);ngOnInit(){this.rutinaId=Number(this.route.snapshot.paramMap.get("id")),this.cargarRutina()}inicializarFormulario(){this.formulario=this.fb.group({ejercicioId:["",[m.required,m.min(1)]],diaSemana:["LUNES",m.required],series:[3,[m.required,m.min(1)]],repeticiones:[12,[m.required,m.min(1)]],peso:[null],duracionMinutos:[null],tiempoDescanso:[60],orden:[1,[m.required,m.min(1)]],notas:[""]})}cargarRutina(){this.rutinaService.obtenerRutinaPorId(this.rutinaId).subscribe({next:o=>{o.success&&o.data&&(this.nombreRutina.set(o.data.nombre),this.ejercicios.set(o.data.ejercicios||[]),this.agruparEjercicios(),this.cargando.set(!1))},error:()=>{this.notificationService.showError("Error al cargar rutina"),this.router.navigate(["/admin/rutinas"])}})}agruparEjercicios(){let o=new Map,i=["LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO","DOMINGO"];this.ejercicios().forEach(c=>{o.has(c.diaSemana)||o.set(c.diaSemana,[]),o.get(c.diaSemana).push(c)});let s=i.filter(c=>o.has(c)).map(c=>({dia:this.formatearDia(c),ejercicios:o.get(c).sort((E,K)=>E.orden-K.orden)}));this.ejerciciosAgrupados.set(s)}agregarEjercicio(){if(this.formulario.invalid){this.formulario.markAllAsTouched(),this.notificationService.showError("Completa los campos requeridos");return}let o=this.formulario.get("series")?.value,i=this.formulario.get("repeticiones")?.value;if(o<=0||i<=0){this.notificationService.showError("Series y repeticiones deben ser positivas (RN13)");return}this.guardando.set(!0),this.rutinaService.agregarEjercicio(this.rutinaId,this.formulario.value).subscribe({next:s=>{this.guardando.set(!1),s.success&&(this.notificationService.showSuccess("Ejercicio agregado"),this.formulario.reset({diaSemana:"LUNES",series:3,repeticiones:12,tiempoDescanso:60,orden:1}),this.cargarRutina())},error:s=>{this.guardando.set(!1),this.notificationService.showError(s.error?.message||"Error al agregar ejercicio")}})}eliminarEjercicio(o){confirm("\xBFEliminar este ejercicio de la rutina?")&&this.rutinaService.eliminarEjercicio(this.rutinaId,o).subscribe({next:i=>{i.success&&(this.notificationService.showSuccess("Ejercicio eliminado"),this.cargarRutina())},error:()=>{this.notificationService.showError("Error al eliminar")}})}formatearDia(o){return{LUNES:"Lunes",MARTES:"Martes",MIERCOLES:"Mi\xE9rcoles",JUEVES:"Jueves",VIERNES:"Viernes",SABADO:"S\xE1bado",DOMINGO:"Domingo"}[o]||o}static \u0275fac=function(i){return new(i||r)(_(q),_(N),_(D),_(J),_(B))};static \u0275cmp=O({type:r,selectors:[["app-gestionar-ejercicios-rutina"]],decls:8,vars:3,consts:[[1,"gestionar-ejercicios-container"],[1,"header"],["routerLink","/admin/rutinas",1,"btn-link"],[1,"loading"],[1,"content"],[1,"add-section"],[1,"add-form",3,"ngSubmit","formGroup"],[1,"form-grid"],[1,"form-group"],[1,"req"],["type","number","formControlName","ejercicioId","min","1"],["formControlName","diaSemana"],["value","LUNES"],["value","MARTES"],["value","MIERCOLES"],["value","JUEVES"],["value","VIERNES"],["value","SABADO"],["value","DOMINGO"],["type","number","formControlName","series","min","1"],["type","number","formControlName","repeticiones","min","1"],["type","number","formControlName","peso","min","0","step","0.5"],["type","number","formControlName","duracionMinutos","min","1"],["type","number","formControlName","tiempoDescanso","min","0"],["type","number","formControlName","orden","min","1"],["type","submit",1,"btn-primary",3,"disabled"],[1,"ejercicios-section"],[1,"empty-state"],[1,"dia-card"],[1,"dia-header"],[1,"count"],[1,"ejercicios-list"],[1,"ejercicio-item"],[1,"ejercicio-info"],[1,"orden"],[1,"ejercicio-details"],[1,"ejercicio-meta"],[1,"notas"],[1,"btn-delete",3,"click"]],template:function(i,s){i&1&&(t(0,"div",0)(1,"div",1)(2,"h1"),n(3),e(),t(4,"button",2),n(5,"\u2190 Volver"),e()(),d(6,X,2,0,"div",3),d(7,re,72,4,"div",4),e()),i&2&&(a(3),g("Gestionar Ejercicios - ",s.nombreRutina()),a(3),l(s.cargando()?6:-1),a(),l(s.cargando()?-1:7))},dependencies:[P,I,U,F,z,L,y,G,T,w,A,$,k,V],styles:[".gestionar-ejercicios-container[_ngcontent-%COMP%]{padding:2rem;max-width:1200px;margin:0 auto}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem}h1[_ngcontent-%COMP%]{font-size:2rem;color:#2d3748;margin:0}.btn-link[_ngcontent-%COMP%]{background:none;border:none;color:#667eea;font-weight:600;cursor:pointer}.add-section[_ngcontent-%COMP%]{background:#fff;padding:1.5rem;border-radius:12px;margin-bottom:2rem;box-shadow:0 2px 8px #0000001a}.add-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem;margin-bottom:1rem}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:1rem;margin-bottom:1rem}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;margin-bottom:.25rem;color:#4a5568}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:.5rem;border:1px solid #e2e8f0;border-radius:6px;font-size:.875rem}.form-group[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:.75rem;color:#718096;margin-top:.25rem}.req[_ngcontent-%COMP%]{color:#e53e3e}.ejercicios-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem;margin-bottom:1rem}.dia-card[_ngcontent-%COMP%]{background:#fff;padding:1.5rem;border-radius:12px;margin-bottom:1rem;box-shadow:0 2px 8px #0000001a}.dia-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem;padding-bottom:.75rem;border-bottom:2px solid #e2e8f0}.dia-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.125rem;color:#2d3748;margin:0}.count[_ngcontent-%COMP%]{background:#edf2f7;padding:.25rem .75rem;border-radius:20px;font-size:.875rem;color:#4a5568}.ejercicios-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.ejercicio-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:start;padding:1rem;background:#f7fafc;border-radius:8px}.ejercicio-info[_ngcontent-%COMP%]{display:flex;gap:1rem;flex:1}.orden[_ngcontent-%COMP%]{font-weight:700;color:#667eea;font-size:1.125rem}.ejercicio-details[_ngcontent-%COMP%]{flex:1}.ejercicio-details[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;color:#2d3748;margin-bottom:.25rem}.ejercicio-meta[_ngcontent-%COMP%]{display:flex;gap:1rem;font-size:.875rem;color:#718096;flex-wrap:wrap}.notas[_ngcontent-%COMP%]{margin-top:.5rem;font-size:.875rem;color:#718096;font-style:italic}.btn-primary[_ngcontent-%COMP%]{padding:.75rem 2rem;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;border-radius:8px;font-weight:600;cursor:pointer}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn-delete[_ngcontent-%COMP%]{padding:.5rem 1rem;background:#fc8181;color:#fff;border:none;border-radius:6px;font-weight:600;cursor:pointer;font-size:.875rem;white-space:nowrap}.btn-delete[_ngcontent-%COMP%]:hover{background:#f56565}.loading[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{text-align:center;padding:3rem;color:#718096}"]})};export{H as GestionarEjerciciosRutinaComponent};
