import{a as Q}from"./chunk-NMCC4XAY.js";import{a as J}from"./chunk-FUAPCROJ.js";import{a as K}from"./chunk-MUQBBXYO.js";import{b as F,c,d as I,e as T,g as V,h as A,i as j,k as z,l as G,m as L,n as B,o as $,p as Y,q as Z,s as H}from"./chunk-YUBUCD23.js";import"./chunk-6LZ2YNEV.js";import{A as s,Aa as w,B as q,K as g,L as b,N as P,O,P as v,Q as e,R as t,S as p,W as y,Y as _,_ as C,aa as x,ca as i,da as N,ea as R,o as E,p as M,ra as k,u,y as l,za as D}from"./chunk-S3CJXT6Z.js";import{a as h,b as S}from"./chunk-2VMXMS7J.js";var W=(a,o)=>o.id;function X(a,o){a&1&&(e(0,"span",9),i(1,"El nombre es obligatorio"),t())}function ee(a,o){a&1&&(e(0,"div",25),i(1,"Cargando etiquetas..."),t())}function te(a,o){if(a&1){let n=y();e(0,"label",30)(1,"input",31),_("change",function(){let m=E(n).$implicit,d=C(2);return M(d.toggleEtiqueta(m.id))}),t(),e(2,"span",32),i(3),t()()}if(a&2){let n=o.$implicit,r=C(2);l(),v("checked",r.etiquetasSeleccionadas().includes(n.id)),l(2),N(n.nombre)}}function ie(a,o){if(a&1&&(e(0,"div",26),P(1,te,4,2,"label",30,W),t()),a&2){let n=C();l(),O(n.etiquetas())}}var U=class a{constructor(o,n,r,m,d){this.fb=o;this.rutinaService=n;this.etiquetaService=r;this.notificationService=m;this.router=d;this.inicializarFormulario()}formulario;guardando=u(!1);cargandoEtiquetas=u(!1);etiquetas=u([]);etiquetasSeleccionadas=u([]);ngOnInit(){this.cargarEtiquetas()}inicializarFormulario(){this.formulario=this.fb.group({nombre:["",[c.required,c.minLength(5)]],descripcion:["",[c.required,c.minLength(10)]],duracionSemanas:[4,[c.required,c.min(1),c.max(52)]],frecuenciaSemanal:[3,[c.required,c.min(1),c.max(7)]],nivelDificultad:["",c.required]})}cargarEtiquetas(){this.cargandoEtiquetas.set(!0),this.etiquetaService.obtenerTodas().subscribe({next:o=>{this.cargandoEtiquetas.set(!1),this.etiquetas.set(o)},error:()=>{this.cargandoEtiquetas.set(!1),this.notificationService.showError("Error al cargar etiquetas")}})}toggleEtiqueta(o){let n=this.etiquetasSeleccionadas();n.includes(o)?this.etiquetasSeleccionadas.set(n.filter(r=>r!==o)):this.etiquetasSeleccionadas.set([...n,o])}guardar(){if(this.formulario.invalid){this.formulario.markAllAsTouched(),this.notificationService.showError("Por favor completa todos los campos requeridos");return}this.guardando.set(!0);let o=S(h({},this.formulario.value),{etiquetaIds:this.etiquetasSeleccionadas()});this.rutinaService.crearRutina(o).subscribe({next:n=>{this.guardando.set(!1),n.success&&(this.notificationService.showSuccess("Rutina creada exitosamente"),this.router.navigate(["/admin/rutinas"]))},error:n=>{this.guardando.set(!1),n.status===409?this.notificationService.showError("Ya existe una rutina con ese nombre (RN11)"):this.notificationService.showError("Error al crear rutina")}})}static \u0275fac=function(n){return new(n||a)(s(Z),s(Q),s(J),s(K),s(D))};static \u0275cmp=q({type:a,selectors:[["app-crear-rutina"]],decls:66,vars:10,consts:[[1,"crear-rutina-container"],[1,"header"],["routerLink","/admin/rutinas",1,"btn-link"],[1,"rutina-form",3,"ngSubmit","formGroup"],[1,"form-section"],[1,"form-group"],["for","nombre"],[1,"required"],["id","nombre","type","text","formControlName","nombre","placeholder","Ej: Rutina Principiante - 4 semanas"],[1,"error-text"],[1,"help-text"],["for","descripcion"],["id","descripcion","formControlName","descripcion","rows","4","placeholder","Describe los objetivos y caracter\xEDsticas de la rutina..."],[1,"form-row"],["for","duracionSemanas"],["id","duracionSemanas","type","number","formControlName","duracionSemanas","min","1","max","52"],["for","frecuenciaSemanal"],["id","frecuenciaSemanal","type","number","formControlName","frecuenciaSemanal","min","1","max","7"],["for","nivelDificultad"],["id","nivelDificultad","formControlName","nivelDificultad"],["value",""],["value","PRINCIPIANTE"],["value","INTERMEDIO"],["value","AVANZADO"],[1,"section-description"],[1,"loading"],[1,"etiquetas-grid"],[1,"form-actions"],["type","button","routerLink","/admin/rutinas",1,"btn-secondary"],["type","submit",1,"btn-primary",3,"disabled"],[1,"checkbox-card"],["type","checkbox",3,"change","checked"],[1,"checkbox-label"]],template:function(n,r){if(n&1&&(e(0,"div",0)(1,"div",1)(2,"h1"),i(3,"Crear Rutina de Ejercicio"),t(),e(4,"button",2),i(5,"\u2190 Volver a rutinas"),t()(),e(6,"form",3),_("ngSubmit",function(){return r.guardar()}),e(7,"div",4)(8,"h2"),i(9,"Informaci\xF3n B\xE1sica"),t(),e(10,"div",5)(11,"label",6),i(12,"Nombre de la Rutina "),e(13,"span",7),i(14,"*"),t()(),p(15,"input",8),g(16,X,2,0,"span",9),e(17,"small",10),i(18,"El nombre debe ser \xFAnico (RN11)"),t()(),e(19,"div",5)(20,"label",11),i(21,"Descripci\xF3n "),e(22,"span",7),i(23,"*"),t()(),p(24,"textarea",12),t(),e(25,"div",13)(26,"div",5)(27,"label",14),i(28,"Duraci\xF3n (semanas) "),e(29,"span",7),i(30,"*"),t()(),p(31,"input",15),t(),e(32,"div",5)(33,"label",16),i(34,"Frecuencia Semanal "),e(35,"span",7),i(36,"*"),t()(),p(37,"input",17),e(38,"small",10),i(39,"D\xEDas de entrenamiento por semana"),t()()(),e(40,"div",5)(41,"label",18),i(42,"Nivel de Dificultad "),e(43,"span",7),i(44,"*"),t()(),e(45,"select",19)(46,"option",20),i(47,"Selecciona un nivel"),t(),e(48,"option",21),i(49,"Principiante"),t(),e(50,"option",22),i(51,"Intermedio"),t(),e(52,"option",23),i(53,"Avanzado"),t()()()(),e(54,"div",4)(55,"h2"),i(56,"Etiquetas"),t(),e(57,"p",24),i(58,"Selecciona las etiquetas que aplican a esta rutina"),t(),g(59,ee,2,0,"div",25),g(60,ie,3,0,"div",26),t(),e(61,"div",27)(62,"button",28),i(63," Cancelar "),t(),e(64,"button",29),i(65),t()()()()),n&2){let m,d,f;l(6),v("formGroup",r.formulario),l(9),x("error",((m=r.formulario.get("nombre"))==null?null:m.invalid)&&((m=r.formulario.get("nombre"))==null?null:m.touched)),l(),b((d=r.formulario.get("nombre"))!=null&&d.hasError("required")&&((d=r.formulario.get("nombre"))!=null&&d.touched)?16:-1),l(8),x("error",((f=r.formulario.get("descripcion"))==null?null:f.invalid)&&((f=r.formulario.get("descripcion"))==null?null:f.touched)),l(35),b(r.cargandoEtiquetas()?59:-1),l(),b(!r.cargandoEtiquetas()&&r.etiquetas().length>0?60:-1),l(4),v("disabled",r.formulario.invalid||r.guardando()),l(),R(" ",r.guardando()?"Guardando...":"Crear Rutina"," ")}},dependencies:[k,w,H,V,L,B,F,A,G,I,T,Y,$,j,z],styles:[".crear-rutina-container[_ngcontent-%COMP%]{padding:2rem;max-width:900px;margin:0 auto}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem}h1[_ngcontent-%COMP%]{font-size:2rem;color:#2d3748;margin:0}.btn-link[_ngcontent-%COMP%]{background:none;border:none;color:#667eea;font-weight:600;cursor:pointer;font-size:1rem}.rutina-form[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:2rem;box-shadow:0 2px 8px #0000001a}.form-section[_ngcontent-%COMP%]{margin-bottom:2rem;padding-bottom:2rem;border-bottom:1px solid #e2e8f0}.form-section[_ngcontent-%COMP%]:last-of-type{border-bottom:none}.form-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem;color:#2d3748;margin-bottom:.5rem}.section-description[_ngcontent-%COMP%]{color:#718096;margin-bottom:1rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1rem}label[_ngcontent-%COMP%]{display:block;font-weight:600;color:#4a5568;margin-bottom:.5rem}.required[_ngcontent-%COMP%]{color:#e53e3e}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid #e2e8f0;border-radius:8px;font-size:1rem;transition:border-color .2s}input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea}input.error[_ngcontent-%COMP%], select.error[_ngcontent-%COMP%], textarea.error[_ngcontent-%COMP%]{border-color:#fc8181}.error-text[_ngcontent-%COMP%]{display:block;color:#e53e3e;font-size:.875rem;margin-top:.25rem}.help-text[_ngcontent-%COMP%]{display:block;color:#718096;font-size:.875rem;margin-top:.25rem}.etiquetas-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:.75rem}.checkbox-card[_ngcontent-%COMP%]{display:flex;align-items:center;padding:.75rem;border:2px solid #e2e8f0;border-radius:8px;cursor:pointer;transition:all .2s}.checkbox-card[_ngcontent-%COMP%]:hover{border-color:#667eea;background:#f7fafc}.checkbox-card[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:auto;margin-right:.5rem}.form-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:flex-end;padding-top:2rem}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]{padding:.75rem 2rem;border:none;border-radius:8px;font-weight:600;cursor:pointer;transition:all .2s;font-size:1rem}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 4px 12px #667eea66}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn-secondary[_ngcontent-%COMP%]{background:#edf2f7;color:#4a5568}.btn-secondary[_ngcontent-%COMP%]:hover{background:#e2e8f0}.loading[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:#718096}"]})};export{U as CrearRutinaComponent};
